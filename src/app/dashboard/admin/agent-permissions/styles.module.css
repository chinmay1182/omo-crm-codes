/* Main Container - Split Layout */
.container {
  display: flex;
  height: calc(100vh - 100px);
  /* Adjusted for Notification Bar + Header */
  background-color: #f8fafc;
  font-family: 'Open Sauce One', sans-serif;
  overflow: hidden;
}

/* Sidebar - Agents List (300px min) */
.agentsList {
  width: 320px;
  min-width: 320px;
  background-color: white;
  border-right: 1px solid #e2e8f0;
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow-y: hidden;
}

.agentsList h4 {
  padding: 0 24px;
  height: 55px;
  /* Fixed height for alignment */
  display: flex;
  /* Flex to center text */
  align-items: center;
  margin: 0;
  font-size: 16px;
  font-weight: 400;
  color: #1e293b;
  border-bottom: 1px solid #e2e8f0;
  background: white;
  position: sticky;
  top: 0;
}

.agentsScrollArea {
  flex: 1;
  overflow-y: auto;
  padding: 12px;
}

/* Agent Item Card */
.agentItem {
  padding: 12px 16px;
  border-radius: 20px;
  margin-bottom: 8px;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
}

.agentItem:hover {
  background-color: #f8fafc;
}

.agentItem.selected {
  background-color: #f0fdf4;
  border-color: #dcfce7;
}

.agentInfo strong {
  display: block;
  font-size: 16px;
  font-weight: 300;
  color: #1e293b;
  margin-bottom: 4px;
}

.agentInfo span {
  display: block;
  font-size: 14px;
  font-weight: 300;
  color: #64748b;
}

.agentItem.selected .agentInfo strong {
  color: #15803d;
  font-weight: 300;
  font-size: 16px;
}

/* Main Content - Permissions Panel */
.permissionsPanel {
  flex: 1;
  display: flex;
  flex-direction: column;
  overflow: hidden;
  background-color: #f8fafc;
}

.agentHeader {
  height: 55px;
  /* Match sidebar */
  padding: 0 24px;
  background: white;
  border-bottom: 1px solid #e2e8f0;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-shrink: 0;
}

.agentHeader h4 {
  margin: 0;
  font-size: 17px;
  font-weight: 300;
  color: #1e293b;
}

.permissionLevels {
  display: flex;
  align-items: center;
  gap: 12px;
}

.permissionLevels label {
  font-size: 13px;
  color: #64748b;
}

.permissionLevels select {
  padding: 6px 24px 6px 12px;
  border: none;
  border-bottom: 1px solid #e2e8f0;
  border-radius: 0;
  font-size: 13px;
  color: #1e293b;
  outline: none;
  background: transparent;
  cursor: pointer;
  appearance: none;
  background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2364748b' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
  background-repeat: no-repeat;
  background-position: right 0 center;
  background-size: 16px;
  font-weight: 300;
  font-family: 'Open Sauce One', sans-serif;
}

.permissionLevels select:focus {
  border-bottom-color: #11a454;
}

/* Scrollable Permissions Content */
.permissionsContent {
  flex: 1;
  overflow-y: auto;
  padding: 24px;
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
  /* Grid for cards */
  gap: 20px;
  align-content: start;
}

.serviceSection {
  background: white;
  border-radius: 20px;
  padding: 24px;
  box-shadow: none;
  height: fit-content;
  /* Don't stretch */
  border: none;
  /* Slight border for definition */
}

.serviceSection h4 {
  margin: 0 0 16px 0;
  font-size: 16px;
  color: #1e293b;
  font-weight: 300;
  padding-bottom: 8px;
  border-bottom: 1px solid #f1f5f9;
}

.permissionsGrid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  gap: 16px;
}

.permissionItem {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 8px;
  border-radius: 6px;
  cursor: pointer;
  transition: all 0.2s;
}

.permissionItem:hover {
  background-color: #f8fafc;
}

.permissionItem input[type="checkbox"] {
  width: 16px;
  height: 16px;
  accent-color: #11a454;
  margin: 0;
}

.permissionItem span {
  font-size: 14px;
  color: #334155;
  font-weight: 300;
}

/* Actions Footer */
.actions {
  padding: 0.7rem;
  /* Extra bottom padding to prevent crop */
  background: white;
  border-top: 1px solid #e2e8f0;
  display: flex;
  gap: 12px;
  justify-content: flex-end;
  flex-shrink: 0;
}

.saveButton,
.refreshButton,
.resetButton,
.deleteButton {
  padding: 10px 24px;
  border-radius: 50px;
  font-size: 14px;
  font-weight: 300;
  cursor: pointer;
  border: none;
  transition: all 0.2s;
  font-family: 'Open Sauce One', sans-serif;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

.saveButton {
  background-color: #11a454;
  color: white;
}

.saveButton:hover {
  background-color: #10964d;
  box-shadow: 0 4px 12px rgba(17, 164, 84, 0.2);
}

.refreshButton {
  background-color: rgba(21, 66, 109, 0.1);
  color: #15426d;
}

.refreshButton:hover {
  background-color: rgba(21, 66, 109, 0.2);
}

.resetButton {
  background-color: rgba(245, 158, 11, 0.1);
  color: #d97706;
}

.resetButton:hover {
  background-color: rgba(245, 158, 11, 0.2);
}

.deleteButton {
  background-color: rgba(239, 68, 68, 0.1);
  color: #ef4444;
}

.deleteButton:hover {
  background-color: rgba(239, 68, 68, 0.2);
}

/* MODAL STYLES (Matching ServiceModal) */
.modalOverlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  backdrop-filter: blur(2px);
  animation: fadeIn 0.3s ease-out;
}

.modalContent {
  background-color: white;
  width: 90%;
  max-width: 700px;
  max-height: 90vh;
  padding: 0;
  border-radius: 0;
  /* Squared like ServiceModal */
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
  display: flex;
  flex-direction: column;
  animation: slideUp 0.3s ease-out;
}

/* Modal Header with Flex Alignment */
.modalHeader {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 24px;
  border-bottom: 1px solid #e2e8f0;
  background: white;
}

.modalContent h2 {
  padding: 0;
  margin: 0;
  font-size: 18px;
  font-weight: 300;
  color: #1e293b;
  border: none;
  background: transparent;
}

.formContent {
  padding: 24px;
  overflow-y: auto;
}

/* Grid Layout for Form */
.gridForm {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
}

.formGroup {
  margin-bottom: 20px;
}

.formGroup label {
  display: block;
  margin-bottom: 6px;
  font-size: 14px;
  font-weight: 300;
  color: #475569;
}

.formGroup input,
.formGroup select {
  width: 100%;
  padding: 8px 0;
  border: none;
  border-bottom: 1px solid #e2e8f0;
  font-size: 14px;
  font-family: inherit;
  font-weight: 300;
  background: transparent;
  transition: all 0.2s;
  box-sizing: border-box;
}

.formGroup input:focus,
.formGroup select:focus {
  outline: none;
  border-bottom-color: #11a454;
}

.formGroup input[type="checkbox"] {
  width: auto;
  margin-right: 8px;
  cursor: pointer;
}

.fullWidth {
  grid-column: 1 / -1;
}

/* CLI Numbers Box */
.cliBox {
  border: 1px solid #e2e8f0;
  border-radius: 4px;
  padding: 12px;
  max-height: 150px;
  overflow-y: auto;
  background: #f8fafc;
}

.cliItem {
  display: flex;
  align-items: center;
  gap: 8px;
  margin-bottom: 8px;
}

.cliItem label {
  margin: 0;
  font-size: 13px;
  cursor: pointer;
  color: #334155;
}

.modalActions {
  padding: 20px 24px;
  background: white;
  border-top: 1px solid #e2e8f0;
  display: flex;
  justify-content: flex-end;
  gap: 12px;
}

.cancelButton {
  padding: 8px 20px;
  border: none;
  background: #f1f5f9;
  color: #475569;
  border-radius: 50px;
  cursor: pointer;
  font-size: 14px;
}

.cancelButton:hover {
  background: #e2e8f0;
}

/* Floating Button */
.floatingButton {
  position: absolute;
  bottom: 24px;
  right: 24px;
  width: 56px;
  height: 56px;
  border-radius: 50%;
  background-color: #11a454;
  color: white;
  border: none;
  box-shadow: 0 4px 12px rgba(17, 164, 84, 0.3);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 20px;
  z-index: 100;
}

/* Success Modal */
.credentialsBox {
  background: #f3f4f6;
  padding: 16px;
  border-radius: 8px;
  margin: 16px 0;
  border: none;
}

.credentialRow {
  display: flex;
  justify-content: space-between;
  margin-bottom: 8px;
  font-size: 14px;
}

.credentialRow:last-child {
  margin-bottom: 0;
}

.credentialValue {
  font-family: monospace;
  font-weight: 600;
  color: #166534;
}

/* Mobile Back Button & Header Alignment */
.headerLeft {
  display: flex;
  align-items: center;
  gap: 12px;
}

.mobileBackButton {
  display: none;
  /* Hidden on Desktop */
  background: none;
  border: none;
  font-size: 18px;
  color: #334155;
  cursor: pointer;
  padding: 0;
}

/* Animations */
@keyframes fadeIn {
  from {
    opacity: 0;
  }

  to {
    opacity: 1;
  }
}

@keyframes slideUp {
  from {
    transform: translateY(20px);
    opacity: 0;
  }

  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Mobile Responsiveness */
@media (max-width: 768px) {
  .container {
    flex-direction: column;
    height: calc(100vh - 80px);
    /* Full mobile height */
  }

  /* Toggle Logic: Default State (Show List) */
  .agentsList {
    width: 100%;
    height: 100%;
    border-right: none;
    display: flex;
  }

  .permissionsPanel {
    display: none;
    /* Hidden by default */
    width: 100%;
    height: 100%;
  }

  /* Toggle Logic: Show Panel State (Select Agent Active) */
  .container.mobileShowPanel .agentsList {
    display: none;
  }

  .container.mobileShowPanel .permissionsPanel {
    display: flex;
    height: 100%;
  }

  .mobileBackButton {
    display: flex;
    align-items: center;
    justify-content: center;
  }

  /* Adjustments */
  .gridForm {
    grid-template-columns: 1fr;
  }

  .modalContent {
    width: 100%;
    height: 100%;
    max-height: 100%;
    border-radius: 0;
  }

  .permissionsContent {
    padding: 16px;
  }

  .agentHeader {
    padding: 0 16px;
    height: 60px;
  }

  .actions {
    padding: 16px;
    gap: 12px;
    display: grid;
    grid-template-columns: 1fr 1fr;
    /* 2 by 2 layout */
    justify-content: stretch;
    flex-wrap: wrap;
    /* Fallback */
  }

  .saveButton,
  .refreshButton,
  .resetButton,
  .deleteButton {
    padding: 10px;
    font-size: 13px;
    width: 100%;
    justify-content: center;
    min-width: unset;
  }

  .permissionsGrid {
    grid-template-columns: 1fr;
    /* Single column permissions */
  }
}

/* Custom Spinner (Matching Scheduling Tab) */
.loading {
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100%;
  width: 100%;
  min-height: 200px;
  background-color: transparent;
}

.spinner {
  width: 40px;
  height: 40px;
  border: 3px solid rgba(0, 0, 0, 0.1);
  border-radius: 50%;
  border-top-color: #11a454;
  animation: spin 1s ease-in-out infinite;
}

.spinnerSmall {
  width: 16px;
  height: 16px;
  border: 2px solid rgba(255, 255, 255, 0.3);
  border-radius: 50%;
  border-top-color: white;
  animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}